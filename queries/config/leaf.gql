query LeafConfig($device: String!) {
  DcimGenericDevice(name__value: $device) {
    edges {
      node {
        id
        name { value }
        role { value }
        topology {
          node{
            ... on TopologyDataCenter{
              strategy{value}
            }
          }
        }
        location {
          node{
            ... on LocationGeneric{
              name{
                value
              }
            }
          }
        }
        device_type {
          node {
            name { value }
            manufacturer { node { name { value } } }
            platform {
              node {
                netmiko_device_type { value }
                napalm_driver { value }
                ansible_network_os { value }
              }
            }
          }
        }
        primary_address {
          node {
            address { value }
            ip_namespace { node { name { value } } }
          }
        }
        tags {
          edges {
            node { name { value } }
          }
        }

        # Enhanced BGP Services with Peer Groups
        device_service {
          edges {
            node {
              __typename
              name { value }
              status { value }

              ... on ServiceBGP {
                session_type { value }
                multipath { value }
                graceful_restart { value }
                local_ip { node { address { value } } }
                local_as { node { asn { value } } }
                remote_ip { node { address { value } } }
                remote_as { node { asn { value } } }
                router_id { node { address { value } } }

                # CRITICAL: BGP Peer Group Information
                peer_group {
                  node {
                    name { value }
                    description { value }
                    peer_group_type { value }
                    bfd_enabled { value }
                    ebgp_multihop { value }
                    send_community { value }
                    send_community_extended { value }
                    route_reflector_client { value }
                    password { value }
                    maximum_routes { value }
                    local_pref { value }
                  }
                }
              }
              ... on ServicePIM {
                dr_priority { value }
                rp_mode { value }
                rp_address {
                  node {
                    address { value }
                    ip_namespace { node { name { value } } }
                  }
                }
                pim_interfaces{
                  edges{
                    node{
                      name {value}
                      status {value}
                    }
                  }
                }
                pim_interface_profile {
                  edges {
                    node {
                      pim_mode { value }
                      hello_interval { value }
                      dr_priority { value }
                    }
                  }
                }
              }
              ... on ServiceOSPF {
                process_id { value }
                version { value }
                router_type { value }
                reference_bandwidth { value }
                router_id { node { address { value } } }
                area {
                  node {
                    area { value }
                    name { value }
                    area_type { value }
                    description { value }
                  }
                }
                # Enhanced OSPF Interface Details
                ospf_interface {
                  edges {
                    node {
                      name { value }
                      role { value }
                      status { value }
                      device { node { name { value } } }
                    }
                  }
                }
                ospf_interface_profile {
                  node {
                    name { value }
                    metric { value }
                    mode { value }
                    authentication_mode { value }
                  }
                }
              }
            }
          }
        }

        # Enhanced Interface Information
        interfaces {
          edges {
            node {
              id
              name { value }
              description { value }
              status { value }
              role { value }

              ... on DcimPhysicalInterface {
                interface_type { value }
                mtu { value }
                connector {
                  node {
                    ... on DcimPhysicalInterface {
                      name { value }
                      device { node { name { value } } }
                    }
                  }
                }
                ip_addresses {
                  edges {
                    node {
                      address { value }
                      ip_namespace { node { name { value } } }
                    }
                  }
                }
              }

              ... on DcimVirtualInterface {
                ip_addresses {
                  edges {
                    node {
                      address { value }
                      ip_namespace { node { name { value } } }
                    }
                  }
                }
              }

              # Network Segment Services (VXLAN/EVPN)
              service {
                edges {
                  node {
                    __typename
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }

