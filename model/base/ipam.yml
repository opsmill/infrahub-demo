---
version: "1.0"

nodes:
  # --------------------  Prefix & IP Address  --------------------
  - name: IPAddress
    namespace: Ipam
    description: "IP Address"
    label: "IP Address"
    icon: "mdi:ip"
    include_in_menu: false # Present in the IPAM section
    inherit_from:
      - BuiltinIPAddress
    uniqueness_constraints:
      - ["address__value", "ip_namespace"]
    human_friendly_id: ["address__value", "ip_namespace__name__value"]

  - name: IPPrefix
    namespace: Ipam
    description: "IPv4 or IPv6 network (with mask)"
    icon: "mdi:ip-network"
    include_in_menu: false # Present in the IPAM section
    label: "Prefix"
    inherit_from:
      - BuiltinIPPrefix
    uniqueness_constraints:
      - ["prefix__value", "ip_namespace"]
    human_friendly_id: ["prefix__value", "ip_namespace__name__value"]
    attributes:
      - name: status
        kind: Dropdown
        choices:
          - name: provisioning
            label: Provisioning
            description: "Prefix is being provisioned."
            color: "#A9DFBF"  # light pastel green
          - name: active
            label: Active
            description: "Prefix is active and operational."
            color: "#A9CCE3"  # pastel blue
          - name: disabled
            label: Disabled
            description: "Prefix has been disabled."
            color: "#D3D3D3"  # light grey
          - name: deleted
            label: Deleted
            description: "Prefix has been deleted."
            color: "#FAD7A0"  # pastel orange
      - name: role
        kind: Dropdown
        optional: true
        choices:
          - name: loopback
            label: Loopback
            description: "Represents internal communications."
            color: "#A9DFBF"  # light pastel green
          - name: management
            label: Management
            description: "Handles administrative operations."
            color: "#A9CCE3"  # pastel blue
          - name: public
            label: Public
            description: "Public facing network."
            color: "#FAD7A0"  # pastel orange
          - name: server
            label: Server
            description: "Dedicated to server functions."
            color: "#CDEACC"  # slightly darker pastel green
          - name: supernet
            label: Supernet
            description: "Covers multiple networks."
            color: "#D2B4DE"  # pastel purple
          - name: technical
            label: Technical
            description: "Focused on technical aspects."
            color: "#D8E4BC"  # pastel greenish-yellow
          - name: dmz
            label: DMZ
            description: "DMZ network."
            color: "#AED6F1"  # pastel light blue
          - name: tbd
            label: To Be Defined
            description: "To Be Defined."
            color: "#FAD7A0"  # pastel orange
    relationships:
      - name: organization
        peer: OrganizationGeneric
        optional: true
        cardinality: one
        kind: Attribute
        order_weight: 1200
      - name: location
        peer: LocationGeneric
        optional: true
        cardinality: one
        kind: Attribute
        order_weight: 1300
      - name: gateway
        label: L3 Gateway
        identifier: "prefix__gateway"
        peer: IpamIPAddress
        optional: true
        cardinality: one
        kind: Attribute
        order_weight: 1500


  - name: VLAN
    namespace: Infra
    description: "A VLAN is a logical grouping of devices in the same broadcast domain"
    label: "VLAN"
    icon: "mdi:lan-pending"   # mdi:lan
    default_filter: name__value
    human_friendly_id: ["name__value", "vlan_id__value"]
    order_by:
      - name__value
    display_labels:
      - name__value
    attributes:
      - name: name
        kind: Text
        unique: true
        order_weight: 2
      - name: description
        kind: Text
        optional: true
      - name: vlan_id
        kind: Number
        order_weight: 3
      - name: status
        kind: Dropdown
        choices:
          - name: active
            label: Active
            description: "Fully operational and currently in service"
            color: "#7fbf7f"
          - name: provisioning
            label: Provisioning
            description: "In the process of being set up and configured"
            color: "#ffff7f"
          - name: maintenance
            label: Maintenance
            description: "Undergoing routine maintenance or repairs"
            color: "#ffd27f"
          - name: drained
            label: Drained
            description: "Temporarily taken out of service"
            color: "#bfbfbf"
      - name: role
        kind: Dropdown
        choices:
          - name: server
            label: Server
            description: "Dedicated systems for managing networked resources"
            color: "#c4bed7"
          - name: management
            label: Management
            description: "Network segments for administrative and control tasks"
            color: "#9af1e1"
          - name: user
            label: User
            description: "Segments designed for end-user access and activities"
            color: "#a0b78d"
    relationships:
      - name: site
        label: "Site"
        peer: "LocationSite"
        optional: true
        cardinality: one
        kind: Attribute
        identifier: "site__vlans"
        order_weight: 1

extensions:
  nodes:
    # Location Extensions
    - kind: LocationGeneric
      relationships:
        - name: prefixes
          label: Prefixes
          peer: IpamIPPrefix
          cardinality: many
          optional: true
          order_weight: 1600