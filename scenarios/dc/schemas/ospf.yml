---
# yaml-language-server: $schema=https://schema.infrahub.app/infrahub/schema/latest.json
version: "1.0"

nodes:
  - name: OSPFInterface
    namespace: Routing
    description: "Pivot table linking OSPF configuration to an interface."
    label: "OSPF Interface"
    icon: "mdi:ethernet"
    include_in_menu: false
    order_by:
      - name__value
    display_labels:
      - name__value
    uniqueness_constraints:
      - ["name__value"]
    human_friendly_id:
      - "name__value"
    attributes:
      # Could be computed later on based on OSPF Instance / Interface Name
      - name: name
        kind: Text
        optional: false
        unique: true
        description: "Name of the OSPF interface Profile."
        order_weight: 1500
      - name: metric
        kind: Number
        optional: true
        description: "OSPF metric for the interface."
        order_weight: 1400
      - name: mode
        kind: Dropdown
        choices:
          - name: normal
            label: Normal
            description: "Standard OSPF interface mode."
            color: "#E6E6FA" # lavender
          - name: passive
            label: Passive
            description: "Interface will not send OSPF hello packets."
            color: "#E6E6FA" # lavender
          - name: peer_to_peer
            label: Peer-to-Peer
            description: "OSPF peer-to-peer interface mode."
            color: "#E6E6FA" # lavender
        default_value: normal
        description: "Mode of the OSPF interface."
        order_weight: 1300
      - name: authentication_key
        kind: Password
        description: "Shared secret used to authenticate and secure routing messages between neighboring routers."
        optional: true
        order_weight: 1250
      - name: authentication_mode
        kind: Dropdown
        choices:
          - name: md5
            label: MD5
            color: "#E6E6FA" # lavender
          - name: sha1
            label: SHA1
            color: "#E6E6FA" # lavender
        optional: true
        order_weight: 1225

  - name: OSPFArea
    namespace: Routing
    description: "OSPF area configuration"
    label: OSPF Area
    icon: "carbon:area"
    menu_placement: ServiceGeneric
    include_in_menu: true
    uniqueness_constraints:
      - ["name__value", "area__value"]
    human_friendly_id:
      - name__value
      - area__value
    display_labels:
      - name__value
      - area__value
    attributes:
      - name: name
        kind: Text
        description: "Name of the OSPF area"
        order_weight: 1000
      - name: area
        kind: Number
        description: "OSPF area number (0-4294967295)"
        order_weight: 1100
      - name: area_type
        kind: Dropdown
        description: "Type of OSPF area"
        choices:
          - name: standard
            label: Standard
            description: "Regular OSPF area"
          - name: stub
            label: Stub Area
            description: "Does not receive external routes"
          - name: nssa
            label: Not-So-Stubby Area
            description: "Can import some external routes"
          - name: totally_stubby
            label: Totally Stubby Area
            description: "Only receives default route"
        default_value: "standard"
        order_weight: 1200
      - name: description
        kind: Text
        description: "Description of the OSPF area"
        optional: true
        order_weight: 1300
